<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Regular expressions highlighter</title>
    <link href="regExpHighlighter.css" rel="stylesheet" type="text/css" />
    <script type="application/javascript;version=1.8" src="tokenizer.js"></script>
    <script type="application/javascript;version=1.8" src="regExpHighlighter.js"></script>
    <script type="application/javascript;version=1.8">
    function tokenize(regExp) {
      tokenizedRegExp = tokenizer.tokenize(regExp);
      console.log(tokenizedRegExp);
      return tokenizedRegExp;
    }

    function highlight() {
      let regExp = tokenize(document.getElementById("regExp").value);
      let regExpHighlighter = document.getElementById("regExpHighlighter");
      regExpHighlighter.textContent = "";

      regExpHighlighter.appendChild(highlighter.highlight(regExp));
    }

    var tokenizer = new RegExpTokenizer();
    var highlighter = new RegExpHighlighter();

    window.addEventListener("DOMContentLoaded", function onLoad() {
      highlight();

      var regExpField = document.getElementById("regExp");
      regExpField.addEventListener("keyup", function onRegExpFieldKeyDown(evt) {
        var ignoredKeyCodes = [
          KeyEvent.DOM_VK_LEFT,
          KeyEvent.DOM_VK_RIGHT,
          KeyEvent.DOM_VK_UP,
          KeyEvent.DOM_VK_DOWN,
          KeyEvent.DOM_VK_CONTROL,
          KeyEvent.DOM_VK_ALT,
          KeyEvent.DOM_VK_ALTGR,
          KeyEvent.DOM_VK_META,
          KeyEvent.DOM_VK_SHIFT,
          KeyEvent.DOM_VK_CAPS_LOCK,
          KeyEvent.DOM_VK_TAB,
          KeyEvent.DOM_VK_RETURN,
          KeyEvent.DOM_VK_CONTEXT_MENU,
          KeyEvent.DOM_VK_ESCAPE,
          KeyEvent.DOM_VK_HOME,
          KeyEvent.DOM_VK_END,
          KeyEvent.DOM_VK_PAGE_UP,
          KeyEvent.DOM_VK_PAGE_DOWN,
          KeyEvent.DOM_VK_NUM_LOCK,
          KeyEvent.DOM_VK_PAUSE,
          KeyEvent.DOM_VK_PRINTSCREEN
        ];

        if (ignoredKeyCodes.indexOf(evt.keyCode) === -1) {
          highlight();
        }
      });
    });
    </script>
  </head>
  <body>
    <textarea id="regExp" cols="100" rows="1">a(b|c)</textarea>
    <div id="regExpHighlighter"></div>
  </body>
</html>